const axios = require('axios');

const testApiPerformance = async () => {
    const url = 'http://localhost:4023/coupon/applyCoupon';
    const latitude = 20.3653353;
    const longitude = 72.9210486;
    const headers = { Authorization: `Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2NzhlMTJhZmVkYTRjMTEyZWQwMTYxZDciLCJyb2xlIjoiQ0FSUEVOVEVSIiwibmFtZSI6ImFqYXkgdmlzaHdha2FybWEiLCJwaG9uZSI6Ijg5NzU5NDQ5MzYiLCJlbWFpbCI6ImFqYXlAdHVybmluZ3BvaW50dmFwaS5jb20iLCJ1aWQiOiJFSHRxOUd3N0E4aHRVbTg4a2gzcDZvcFRmZDIyIiwiZmNtVG9rZW4iOiJlUkJrcVNRUFJTYWwzM19NNDZhTkozOkFQQTkxYkZ2OUxDVmxsdEpnNExHTmJUWWZmc1h6QlhlWFRuUGhlV29BRGhSSG5Za3JXVlQ2UDN4cmU3Wm1xTl9YTVQ2a0hDRWdEY2FjaXdEN25sbzc1dGNVb3I4LVZESk43VzViVEI0QXkzNWVNRjlOQkVGdlpVIiwiZXhwIjoxNzQ1Mjk5MjAzLCJpYXQiOjE3Mzc1MjMyMDN9.WqN_Uu91udgqat_hd_Fr18j6w_ao6XTvJ0QB9MW8fZQ` };

    // The data array you provided
    const data = [
        "TNP5517201813", "TNP0667809418", "TNP9153964990", "TNP7491001201", "TNP5806017161", "TNP3320629296",
        "TNP4711981332", "TNP6784397385", "TNP6028631018", "TNP6535681220", "TNP9203686836", "TNP9895358316",
        "TNP5617549895", "TNP9507019309", "TNP6735734637", "TNP4073919672", "TNP1228783167", "TNP0508406312",
        "TNP4300943772", "TNP3811677732", "TNP0004586829", "TNP5046176878", "TNP2057040002", "TNP4959454045",
        "TNP3471264884", "TNP5820522227", "TNP5542286321", "TNP4227392498", "TNP6464530651", "TNP3847907219",
        "TNP6627388494", "TNP6754153289", "TNP6585667823", "TNP5323263704", "TNP3114972035", "TNP4951600661",
        "TNP2440920237", "TNP5626242653", "TNP6401468964", "TNP7356198797", "TNP1444586604", "TNP6278718103",
        "TNP3382345536", "TNP0780933808", "TNP8360386446", "TNP0049788807", "TNP0869246897", "TNP5080428815",
        "TNP6584822012", "TNP9495707221", "TNP7900726486", "TNP5633644499", "TNP7101591463", "TNP0557443896",
        "TNP4137223117", "TNP7788579763", "TNP3172035904", "TNP1882032201", "TNP8574991833", "TNP0606481317",
        "TNP8590234220", "TNP9569505751", "TNP7301451064", "TNP2936552120", "TNP4793942854", "TNP3792442806",
        "TNP1270568821", "TNP1539583195", "TNP3485441965", "TNP0522349286", "TNP8739965520", "TNP9971108657",
        "TNP0206426111", "TNP4438669852", "TNP1334892936", "TNP6858343878", "TNP1882992680", "TNP5595222533",
        "TNP4828001588", "TNP4724040958", "TNP3289830375", "TNP5875662495", "TNP7197385081", "TNP0516846642",
        "TNP1008946903", "TNP3315384631", "TNP6997045654", "TNP6496520050", "TNP8133007452", "TNP5377801943",
        "TNP7861497912", "TNP1940104912", "TNP6626368113", "TNP0023545711", "TNP5106263459", "TNP6941840949",
        "TNP1617718337", "TNP2746500677", "TNP3333851568", "TNP5829913056", "TNP4668007703", "TNP1430082579",
        "TNP3914203945"
    ];

    const requests = data.map(id => {
        const payload = { id, latitude, longitude };
        return axios.post(url, payload, { headers });
    });

    console.time('Performance Test');
    await Promise.all(requests);
    console.timeEnd('Performance Test');
};

testApiPerformance().catch(console.error);
